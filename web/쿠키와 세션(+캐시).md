# 쿠키와 세션

### 쿠키(Cookie)?
HTTP의 일종으로 사용자가 웹 사이트를 방문할 경우,<br>
그 사이트가 **사용하고 있는 서버**에서 사용자의 컴퓨터에 저장하는 작은 기록 정보 파일
### 세션(Session)?
방문자가 웹 서버에 접속해 있는 상태를 하나의 단위로 보고 그것을 세션이라고 함

#### ➡︎ 쿠키와 세션을 사용하는 이유?
- HTTP 프로토콜의 특징이자 약점(비연결성, 비상태성)을 보완하기 위해서 사용<br>
→ 서버와 클라이언트가 통신을 할 때, 통신이 연속적으로 이어지지 않고 한 번 통신이 되면 끊어진다. <br> → 서버는 클라이언트가 누구인지 계속 인증을 해줘야 하는데 그 방법이 쿠키와 세션
#### ➡︎ 쿠키와 세션의 가장 큰 차이점?
- 상태 정보의 저장 위치.
- 쿠키는 클라이언트(웹 브라우저가 지정하는 메모리/ 하드디스크), 세션은 서버의 메모리
#### ➡︎ 세션보다 '쿠키'를 사용하는 이유?
- 세션을 사용하기 위해서는 서버의 자원을 사용해야하는데 자원은 한계가 있고, 속도가 느려질 수 있다는 단점이 있다. <br> 따라서 쿠키와 세션을 적절한 요소 및 기능에 **병행**사용하는 것이 서버 자원의 낭비를 방지하면서 웹사이트의 속도를 높일 수 있다.

<br><br>

>#### 쿠키의 동작 순서
1. 클라이언트가 페이지를 요청(사용자가 웹사이트에 접근)
2. 웹 서버는 쿠키를 생성
3. 생성한 쿠키에 정보를 담아 HTTP 화면을 돌려줄 때, 같이 클라이언트에게 돌려줌
4. 넘겨받은 쿠키는 클라이언트가 가지고 있다가(로컬 PC에 저장) 다시 서버에 요청할 때 요청과 함께 쿠키를 전송
5. 동일 사이트 재방문 시 클라이언트의 PC에 해당 쿠키가 있는 경우, 요청 페이지와 함께 쿠키를 전송

>#### 세션의 동작순서
1. 클라이언트가 페이지를 요청
2. 서버는 접근한 클라이언트의 Request-Header 필드인 **Cookie**를 확인하여, 클라이언트가 해당 `session-id`를 보냈는지 확인
3. `session-id`가 존재하지 않는다면 서버는 `session-id`를 생성해 클라이언트에게 돌려줌
4. 서버에서 클라이언트로 돌려준 `session-id`를 쿠키를 사용해 서버에 저장
5. 클라이언트는 재접속 시, 이 쿠키를 이용해 `session-id` 값을 서버에 전달


<br><br>

| | 쿠키 | 세션 |
| :---: | :---: | :---: |
| 저장위치 | Client | Server |
| 저장형식 | Text | Object |
| **만료시점** | 쿠키 저장시 설정<br>(설정 없으면 브라우저 종료 시) | 정확한 시점 모름 |
| 리소스 | 클라이언트의 리소스 | 서버의 리소스 |
| 용량제한 | 한 도메인 당 20개, <br>한 쿠키당 4KB | 제한없음 |
| 보안 | 취약 | 비교적 좋음 |
| 속도 | 빠름<br>(쿠키에 정보가 존재) | 느림<br>(정보가 서버에 존재) |

<br>

### 캐시(Cache)?
캐시(Cache)는 **웹 페이지 요소를 저장하기 위한 임시 저장소**이고, 쿠키/ 세션은 **정보를 저장**하기 위해 사용된다.<br>캐시는 웹 페이지를 빠르게 렌더링 할 수 있도록 도와주고, 쿠키/ 세션은 사용자의 인증을 도와준다.

<br>

#### 출처
[https://dev-coco.tistory.com](https://dev-coco.tistory.com/61)     
[https://hahahoho5915.tistory.com](https://hahahoho5915.tistory.com/32)<br>
[https://gyoogle.dev](https://gyoogle.dev/blog/web-knowledge/Cookie%20&%20Session.html)
