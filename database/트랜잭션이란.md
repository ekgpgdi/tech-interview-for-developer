## 트랜잭션이란?
1. 트랜잭션(Transaction)
2. 트랜잭션의 특징(ACID)
3. 트랜잭션의 상태
4. 트랜잭션 격리 수준(Isolation Level)
---

### 트랜잭션(Transaction)
- 데이터베이스의 상태를 변환시키는 하나의 논리적인 작업 단위를 구성하는 연산들의 집합
- 데이터베이스의 상태를 변환하는 도중 예기치 못한 에러로 잘못된 작업 실행을 방지하기 위하여 사용한다.
- 트랜잭션은 Commit 되거나 Rollback 된다.
- Commit : 한개의 논리적 단위(트랜잭션)에 대한 작업이 성공적으로 끝나 데이터베이스가 다시 일관된 상태에 있을 때, 이 트랜잭션이 행한 갱신 연산이 완료된 것을 트랜잭션 관리자에게 알려주는 연산이다.
- Rollback : 하나의 트랜잭션 처리가 비정상적으로 종료되어 데이터베이스의 일관성을 깨뜨렸을 때, 이 트랜잭션의 일부가 정상적으로 처리되었더라도 트랜잭션의 원자성을 구현하기 위해 이 트랜잭션이 행한 모든 연산을 취소(Undo)하는 연산이다. Rollback 시에는 해당 트랜잭션을 재시작하거나 폐기한다.

### 트랜잭션의 특징(ACID)
- 원자성(Atomicity) : 트랜잭션이 DB에 모두 반영되거나, 혹은 전혀 반영되지 않아야 된다.
- 일관성(Consistency) : 트랜잭션의 작업 처리 결과는 항상 일관성 있어야 한다.
- 독립성(Isolation) : 둘 이상의 트랜잭션이 동시에 병행 실행되고 있을 때, 어떤 트랜잭션도 다른 트랜잭션 연산에 끼어들 수 없다.
- 지속성(Durability) : 트랜잭션이 성공적으로 완료되었으면, 결과는 영구적으로 반영되어야 한다.

### 트랜잭션의 상태
- 활동(Active) : 트랜잭션이 실행 중에 있는 상태, 연산들이 정상적으로 실행 중인 상태
- 장애(Failed) : 트랜잭션이 실행에 오류가 발생하여 중단된 상태
- 철회(Aborted) : 트랜잭션이 비정상적으로 종료되어 Rollback 연산을 수행한 상태
- 부분 완료(Partially Committed) : 트랜잭션이 마지막 연산까지 실행했지만, Commit 연산이 실행되기 직전의 상태
- 완료(Committed): 트랜잭션이 성공적으로 종료되어 Commit 연산을 실행한 후의 상태

### 트랜잭션 격리 수준(Isolation Level)
- 트랜잭션에서 일관성 없는 데이터를 허용하도록 하는 수준
- Locking 이란? : 트랜잭션이 DB를 다루는 동안 다른 트랜잭션이 관여하지 못하도록 막는 것
- 격리 수준 조정이 낮으면 동시성이 증가되는데 데이터 무결성에 문제가 발생할 수 있고, 높으면 데이터의 무결성을 유지하는데 동시성이 떨어질 수 있다.

- Read Uncommitted (레벨 0) : SELECT 문장이 수행되는 동안 해당 데이터에 Shared Lock이 걸리지 않는 Level
- Read Committed (레벨 1) : SELECT 문장이 수행되는 동안 해당 데이터에 Shared Lock이 걸리는 Level. 트랜잭션이 수행되는 동안 다른 트랜잭션이 접근할 수 없어 대기하게 된다. Commit이 이루어진 트랜잭션만 조회할 수 있다. 따라서, 어떤 사용자가 A라는 데이터를 B라는 데이터로 변경하는 동안 다른 사용자는 해당 데이터에 접근할 수 없다. 대부분의 SQL Server가 Default로 사용하는 Isolation Level
- Repeatable Read (레벨 2) : 트랜잭션이 완료될 때까지 SELECT 문장이 사용하는 모든 데이터에 Shared Lock이 걸리는 Level. 트랜잭션이 범위 내에서 조회한 데이터의 내용이 항상 동일함을 보장한다. 따라서, 다른 사용자는 그 영역에 해당되는 데이터에 대한 수정이 불가능하다. MySQL에서 Default로 사용하는 Isolation Level
- Serializable (레벨 3) : 트랜잭션이 완료될 때까지 SELECT 문장이 사용하는 모든 데이터에 Shared Lock이 걸리는 Level. 완벽한 읽기 일관성 모드를 제공한다. 따라서, 다른 사용자는 그 영역에 해당되는 데이터에 대한 수정 및 입력이 불가능하다.

### reference
- https://github.com/WeareSoft/tech-interview/blob/master/contents/db.md
